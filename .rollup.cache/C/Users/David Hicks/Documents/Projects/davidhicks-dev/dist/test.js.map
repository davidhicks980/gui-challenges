{"version":3,"file":"test.js","sourceRoot":"","sources":["../src/test.ts"],"names":[],"mappings":"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","sourcesContent":["import { svg, html } from \"lit-html\";\r\nimport { BaseElement } from \"./base-elem\";\r\n\r\nconst HAS_RESIZE_OBSERVER = typeof ResizeObserver === \"function\";\r\n\r\n/**\r\n * @typedef {{\r\n *   x: number,\r\n *   y: number,\r\n *   score: number,\r\n *   date: string,\r\n * }}\r\n */\r\nlet DataPoint; // eslint-disable-line no-unused-vars\r\n\r\n/**\r\n * @typedef {{\r\n *   points: string,\r\n *   lastPoint: {x: number, y: number},\r\n *   firstPoint: {x: number, y: number},\r\n *   color: string,\r\n * }}\r\n */\r\nlet PathPart; // eslint-disable-line no-unused-vars\r\n\r\n/**\r\n * @param {number} val to round\r\n * @return {number} number rounded to two decimals\r\n */\r\nfunction clampTo2Decimals(val) {\r\n  return Math.round(val * 100) / 100;\r\n}\r\n\r\n/**\r\n * Render a sparkline.\r\n * @extends {BaseElement}\r\n * @final\r\n */\r\nclass SparklineChart extends BaseElement {\r\n  fill: boolean;\r\n  topPadding: number;\r\n  circleRadius: number;\r\n  strokeWidth: number;\r\n  width_: number;\r\n  height_: number;\r\n  point_: null;\r\n  cursorElement_: null;\r\n  scoreElement_: null;\r\n  announcerElement_: null;\r\n  scoreValueText_: null;\r\n  scoreDateText_: null;\r\n  datapoints: never[];\r\n  demo_: any;\r\n  values!: { score: number; date: string }[];\r\n  medians!: { score: number; date: string }[];\r\n  renderRoot: any;\r\n  static get properties() {\r\n    return {\r\n      fill: { type: Boolean },\r\n      values: { type: Object },\r\n      medians: { type: Object },\r\n\r\n      // TODO(robdodson): make these all --var?\r\n      topPadding: { type: Number }, // top padding to prevent catching popup\r\n      circleRadius: { type: Number }, // configurable circle radius\r\n      strokeWidth: { type: Number }, // width of SVG stroke\r\n\r\n      demo: { type: Boolean },\r\n    };\r\n  }\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.fill = false;\r\n    this.topPadding = 20;\r\n    this.circleRadius = 3;\r\n    this.strokeWidth = 2;\r\n\r\n    // private, updated in render() by calling getBoundingClientRect\r\n    this.width_ = 0;\r\n    this.height_ = 0;\r\n\r\n    // cursor selection, causes non-render() changes\r\n    this.point_ = null;\r\n\r\n    // elements stolen from renderRoot\r\n    /** @type SVGLineElement */\r\n    this.cursorElement_ = null;\r\n    this.scoreElement_ = null;\r\n    this.announcerElement_ = null;\r\n    this.scoreValueText_ = null;\r\n    this.scoreDateText_ = null;\r\n\r\n    // processed points from values that allow mouse focus\r\n    this.datapoints = [];\r\n\r\n    // bind so this can be added/removed from a global handler\r\n    this.onResize = this.onResize.bind(this);\r\n\r\n    if (HAS_RESIZE_OBSERVER) {\r\n      // We rely on our user ensuring that <web-sparkline-chart> has size.\r\n      const ro = new ResizeObserver(this.onResize);\r\n      ro.observe(this);\r\n    }\r\n  }\r\n\r\n  set demo(demo) {\r\n    this.demo_ = demo;\r\n\r\n    if (demo) {\r\n      this.values = [\r\n        { score: 35, date: \"2019-05-22\" },\r\n        { score: 30, date: \"2019-05-24\" },\r\n        { score: 20, date: \"2019-06-01\" },\r\n        { score: 50, date: \"2019-06-24\" },\r\n        { score: 92, date: \"2019-06-29\" },\r\n        { score: 90, date: \"2019-07-01\" },\r\n      ];\r\n\r\n      this.medians = [{ score: 89, date: \"2019-06-24\" }];\r\n    }\r\n  }\r\n\r\n  get demo() {\r\n    return this.demo_;\r\n  }\r\n\r\n  redrawPoint() {\r\n    if (!(this.cursorElement_ && this.scoreElement_)) {\r\n      return;\r\n    }\r\n\r\n    // Clear the point if it was drawn on the screen.\r\n    if (!this.point_) {\r\n      this.cursorElement_.setAttribute(\"x1\", \"-10000\");\r\n      this.cursorElement_.setAttribute(\"x2\", \"-10000\");\r\n      this.scoreElement_.setAttribute(\"transform\", \"translate(-10000,-10000)\");\r\n      return;\r\n    }\r\n\r\n    // Draw the point on the screen.\r\n    this.cursorElement_.setAttribute(\"x1\", this.point_.x);\r\n    this.cursorElement_.setAttribute(\"x2\", this.point_.x);\r\n    this.cursorElement_.setAttribute(\"y1\", this.point_.y);\r\n    this.cursorElement_.setAttribute(\"y2\", String(this.height_));\r\n    const colorClass = this.computeColorClass_(this.point_.score);\r\n    this.cursorElement_.style.stroke = colorClass;\r\n    this.cursorElement_.classList.value = `sl-cursor result--${colorClass}`;\r\n\r\n    // Set text first, then measure.\r\n    this.scoreValueText_.textContent = this.point_.score;\r\n\r\n    const d = new Date(this.point_.date);\r\n    let dateText = \"\\u2014\"; // em dash\r\n\r\n    if (d.getTime()) {\r\n      // d.getTime() is NaN/falsey if invalid\r\n      try {\r\n        dateText = new Intl.DateTimeFormat(\"en-US\", {\r\n          day: \"numeric\",\r\n          month: \"short\",\r\n        }).format(d);\r\n      } catch (err) {\r\n        dateText = d.toLocaleDateString();\r\n      }\r\n    }\r\n    this.scoreDateText_.textContent = dateText;\r\n\r\n    const PADDING = 3;\r\n\r\n    const scoreHoverRectWidth = this.scoreElement_.getBoundingClientRect()\r\n      .width;\r\n    const x = Math.max(\r\n      PADDING,\r\n      Math.min(\r\n        this.width_ - scoreHoverRectWidth - 2 * PADDING,\r\n        this.point_.x - scoreHoverRectWidth / 2\r\n      )\r\n    );\r\n    const y = Math.max(\r\n      -1 * (this.height_ / 2),\r\n      Math.min(this.height_ / 2 - PADDING - 10, this.point_.y - 10)\r\n    );\r\n\r\n    // Position score/date centered on the hover card.\r\n    const scoreTextWidth = this.scoreValueText_.getBoundingClientRect().width;\r\n    const dateTextWidth = this.scoreDateText_.getBoundingClientRect().width;\r\n    this.scoreDateText_.setAttribute(\r\n      \"x\",\r\n      String(scoreHoverRectWidth / 2 - dateTextWidth / 2)\r\n    );\r\n    this.scoreValueText_.setAttribute(\r\n      \"x\",\r\n      String(scoreHoverRectWidth / 2 - scoreTextWidth / 2)\r\n    );\r\n    this.scoreElement_.setAttribute(\"transform\", `translate(${x},${y})`);\r\n    this.scoreElement_.classList.value = `sl-caption result--${colorClass}`;\r\n  }\r\n\r\n  set point(point) {\r\n    if (this.point_ === point) {\r\n      return;\r\n    }\r\n\r\n    this.point_ = point;\r\n    if (point) {\r\n      const date = new Date(point.date).toLocaleDateString();\r\n      this.announce_(`Score ${point.score} on date ${date}`);\r\n    }\r\n    this.redrawPoint();\r\n  }\r\n\r\n  get point() {\r\n    return this.point_;\r\n  }\r\n\r\n  connectedCallback() {\r\n    super.connectedCallback();\r\n\r\n    this.setAttribute(\"aria-valuemin\", \"0\");\r\n    this.setAttribute(\"aria-valuemax\", \"100\");\r\n\r\n    this.setAttribute(\"role\", \"group\");\r\n    this.setAttribute(\r\n      \"aria-label\",\r\n      \"scores over time. Use arrow keys to navigate\"\r\n    );\r\n\r\n    if (!HAS_RESIZE_OBSERVER) {\r\n      window.addEventListener(\"resize\", this.onResize);\r\n    }\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    super.disconnectedCallback();\r\n\r\n    if (!HAS_RESIZE_OBSERVER) {\r\n      window.removeEventListener(\"resize\", this.onResize);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * As a mouse moves over this element, find and highlight the nearest point in the chart.\r\n   *\r\n   * @param {WMouseEvent} e\r\n   */\r\n  onMouseMove(e) {\r\n    // TODO(b/117590606): Make this work with touch events.\r\n    const mouseX = e.offsetX;\r\n\r\n    const nextDataPointIdx = this.datapoints.findIndex(\r\n      (entry) => entry.x >= mouseX\r\n    );\r\n    const prevPoint = this.datapoints[nextDataPointIdx - 1];\r\n    const nextPoint = this.datapoints[nextDataPointIdx];\r\n\r\n    let point;\r\n    if (!nextPoint) {\r\n      point = this.datapoints[this.datapoints.length - 1];\r\n    } else if (!prevPoint) {\r\n      point = this.datapoints[0];\r\n    } else {\r\n      if (Math.abs(mouseX - prevPoint.x) <= Math.abs(mouseX - nextPoint.x)) {\r\n        point = prevPoint;\r\n      } else {\r\n        point = nextPoint;\r\n      }\r\n    }\r\n\r\n    this.point = point;\r\n  }\r\n\r\n  /**\r\n   * Allow keyboard navigation through points.\r\n   *\r\n   * @param {KeyboardEvent} e\r\n   */\r\n  onKeyDown(e) {\r\n    switch (e.key) {\r\n      case \"Right\":\r\n      case \"ArrowRight\":\r\n        this.setNextPoint_();\r\n        break;\r\n\r\n      case \"Left\":\r\n      case \"ArrowLeft\":\r\n        this.setPrevPoint_();\r\n        break;\r\n\r\n      default:\r\n        return;\r\n    }\r\n\r\n    e.preventDefault();\r\n  }\r\n\r\n  /**\r\n   * Set the next point that should be drawn to the screen.\r\n   * @private\r\n   */\r\n  setNextPoint_() {\r\n    // Unless the user has focused on the last, this should always find a point\r\n    // as the disused cursor is hidden offscreen to the left.\r\n    const cursorX = this.cursorElement_.getAttribute(\"x1\");\r\n    const nextPoint = this.datapoints.find((entry) => entry.x > cursorX);\r\n    if (nextPoint) {\r\n      this.point = nextPoint;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Set the previous point that should be drawn to the screen.\r\n   * @private\r\n   */\r\n  setPrevPoint_() {\r\n    const cursorX = +this.cursorElement_.getAttribute(\"x1\");\r\n    const currentPointIdx = this.datapoints.findIndex(\r\n      (entry) => entry.x === cursorX\r\n    );\r\n\r\n    const prevPoint =\r\n      currentPointIdx === -1\r\n        ? this.datapoints.slice(-1)[0]\r\n        : this.datapoints[currentPointIdx - 1];\r\n    if (prevPoint) {\r\n      this.point = prevPoint;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Clear the point due to blur or mouseout.\r\n   */\r\n  onClearPoint() {\r\n    this.point = null;\r\n  }\r\n\r\n  /**\r\n   * Announce content for screen readers using an ARIA live region.\r\n   * @private\r\n   * @param {string} msg\r\n   */\r\n  announce_(msg) {\r\n    this.announcerElement_.textContent = msg;\r\n    window.setTimeout(() => {\r\n      this.announcerElement_.textContent = \"\";\r\n    }, 100);\r\n  }\r\n\r\n  /**\r\n   * Calculate the data point y's value\r\n   * @param {number} score\r\n   * @return {number}\r\n   */\r\n  calculateY(score) {\r\n    const scoreRatio = Math.min(1, Math.max(score / 100, 0));\r\n    return (1 - scoreRatio) * this.height_;\r\n  }\r\n\r\n  /**\r\n   * Generates the line path from values.\r\n   * @param {Array<LighthouseScore>?} values Values to generate a path from.\r\n   * @return {{datapoints: Array<Object>, paths: Array<PathPart>}}\r\n   * @private\r\n   */\r\n  processValues(values) {\r\n    if (!values || values.length === 0) {\r\n      // no values, failure case: just draw in the top-left corner\r\n      return {\r\n        datapoints: [],\r\n        paths: [\r\n          {\r\n            points: \"M0 0 L0 0\",\r\n            firstPoint: { x: 0, y: 0 },\r\n            lastPoint: { x: 0, y: 0 },\r\n            color: \"\",\r\n          },\r\n        ],\r\n      };\r\n    }\r\n\r\n    // Regardless of how many values we have, each is interspersed by the same offset.\r\n    const offset =\r\n      values.length > 1 ? Math.floor(this.width_ / (values.length - 1)) : 0;\r\n\r\n    const datapoints = [];\r\n    const paths = [];\r\n\r\n    let points = `M0 ${this.calculateY(values[0].score).toFixed(2)}`;\r\n    let firstPoint = { x: NaN, y: NaN };\r\n    let lastPoint = { x: NaN, y: NaN };\r\n    let prevColor;\r\n\r\n    values.forEach((value, i) => {\r\n      const isFirstPoint = i === 0;\r\n      const isLastPoint = i === values.length - 1;\r\n\r\n      // if last point, use width (otherwise the clamp hides ~fractional pixels)\r\n      const x = isLastPoint ? this.width_ : i * offset;\r\n      const y = parseFloat(this.calculateY(value.score).toFixed(2));\r\n      const currColor = this.computeColorClass_(value.score);\r\n\r\n      if (isFirstPoint) {\r\n        firstPoint = { x, y };\r\n      } else if (prevColor !== currColor) {\r\n        paths.push({ firstPoint, lastPoint, color: prevColor, points });\r\n        points = `M${lastPoint.x} ${lastPoint.y} L${lastPoint.x} ${lastPoint.y}`;\r\n        firstPoint = { x: lastPoint.x, y: lastPoint.y };\r\n      }\r\n\r\n      points += ` L${x} ${y}`;\r\n\r\n      if (isLastPoint) {\r\n        if (isFirstPoint) {\r\n          // if this graph only has one point, the fill needs to reset to far left\r\n          firstPoint.x = 0;\r\n        }\r\n        paths.push({\r\n          firstPoint,\r\n          lastPoint: { x, y },\r\n          color: currColor,\r\n          points,\r\n        });\r\n      }\r\n\r\n      prevColor = currColor;\r\n      lastPoint = { x, y };\r\n\r\n      datapoints.push({\r\n        x,\r\n        y,\r\n        score: clampTo2Decimals(value.score),\r\n        date: value.date,\r\n      });\r\n    });\r\n\r\n    return { paths, datapoints };\r\n  }\r\n\r\n  updated(changedProperties) {\r\n    super.updated(changedProperties);\r\n\r\n    if (changedProperties.has(\"fill\") || changedProperties.has(\"values\")) {\r\n      const gradients = this.renderRoot.querySelectorAll(\".gradient\");\r\n      for (const gradient of gradients) {\r\n        if (this.fill) {\r\n          gradient.classList.add(\"fadein\");\r\n        } else {\r\n          gradient.classList.remove(\"fadein\");\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const rect = this.getBoundingClientRect();\r\n\r\n    // If the element hasn't yet had layout, then request a rerender a frame later.\r\n    if (!rect.width || !rect.height) {\r\n      window.requestAnimationFrame(() => this.requestUpdate());\r\n      // we can't bail early, as firstUpdated() still needs to steal rendered nodes\r\n    }\r\n\r\n    const pixelBuffer = this.circleRadius + this.strokeWidth / 2;\r\n\r\n    // Save width and height, padded by any requested buffer. This is needed for processValues()\r\n    // and showing the user's cursor.\r\n    // Align the SVG content by `pixelBuffer` on the top, left, and right sides. Add topPadding on\r\n    // the top, to allow the popup to be contained properly.\r\n    const groupTransform = `translate(${pixelBuffer},${\r\n      pixelBuffer + this.topPadding\r\n    })`;\r\n    this.width_ = rect.width - pixelBuffer * 2;\r\n    this.height_ = rect.height - pixelBuffer - this.topPadding;\r\n\r\n    const { paths, datapoints } = this.processValues(this.values);\r\n    this.datapoints = datapoints;\r\n\r\n    if (this.datapoints.length) {\r\n      this.setAttribute(\"aria-valuenow\", this.datapoints.slice(-1)[0].score);\r\n    } else {\r\n      this.removeAttribute(\"aria-valuenow\");\r\n    }\r\n\r\n    const lastDataPoint = paths[paths.length - 1] || null;\r\n\r\n    // Only render medians if there's actually a value contained here.\r\n    let medianPaths;\r\n    if (this.medians && this.medians.length) {\r\n      const { paths } = this.processValues(this.medians);\r\n      medianPaths = paths.map(({ points }) => {\r\n        return svg`<path d=\"${points}\" class=\"path dashed\" />`;\r\n      });\r\n    }\r\n\r\n    const lastDataPointCircle = lastDataPoint\r\n      ? svg`\r\n      <circle\r\n        cx=\"${lastDataPoint.lastPoint.x}\"\r\n        cy=\"${lastDataPoint.lastPoint.y}\"\r\n        r=\"${this.circleRadius}\"\r\n        stroke-width=\"${this.strokeWidth}\"\r\n        class=\"result--${lastDataPoint.color}\"\r\n        style=\"fill:#fff\" />`\r\n      : \"\";\r\n\r\n    /* eslint-disable max-len,indent */\r\n    const innerSVG = svg`\r\n      <svg xmlns=\"http://www.w3.org/2000/svg\"\r\n          width=\"100%\" height=\"100%\">\r\n        <defs>\r\n          <filter id=\"hover-shadow\">\r\n            <feDropShadow dx=\"0\" dy=\"1\" stdDeviation=\"2\" flood-color=\"#000\"\r\n               flood-opacity=\"0.4\"/>\r\n          </filter>\r\n          <linearGradient id=\"gradient-pass\" x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\">\r\n            <stop offset=\"0\" stop-color=\"rgb(24,182,99)\" stop-opacity=\"0.2\" />\r\n          </linearGradient>\r\n          <linearGradient id=\"gradient-average\" x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\">\r\n            <stop offset=\"0\" stop-color=\"rgb(251,140,0)\" stop-opacity=\"0.2\" />\r\n          </linearGradient>\r\n          <linearGradient id=\"gradient-fail\" x1=\"0\" x2=\"0\" y1=\"0\" y2=\"1\">\r\n            <stop offset=\"0\" stop-color=\"rgb(229,57,53)\" stop-opacity=\"0.2\" />\r\n          </linearGradient>\r\n        </defs>\r\n        <g transform=\"${groupTransform}\">\r\n          ${paths.map(({ firstPoint, points, color }) => {\r\n            // Ensures that each path segment's fill is complete.\r\n            const d = `${points} V ${this.height_} H ${firstPoint.x} Z`;\r\n            return svg`\r\n              <path class=\"gradient\"\r\n                  d=\"${d}\"\r\n                  fill=\"${this.fill ? `url(#gradient-${color})` : \"none\"}\" />\r\n              <path d=\"${points}\" class=\"path result--${color}\" style=\"fill:none\" />\r\n            `;\r\n          })}\r\n          ${medianPaths}\r\n          <line class=\"sl-cursor\"\r\n                x1=\"-10000\" x2=\"-10000\" y1=\"0\" y2=\"${this.height_}\" />\r\n          ${lastDataPointCircle}\r\n          <g class=\"sl-caption\" transform=\"translate(-10000,-10000)\" aria-hidden=\"true\">\r\n            <rect width=\"50\" height=\"40\" fill=\"#fff\" rx=\"2\" ry=\"2\"\r\n                  style=\"filter:url(#hover-shadow)\"/>\r\n            <text class=\"sl-caption--value\" stroke=\"none\" x=\"25\" y=\"18\"></text>\r\n            <text class=\"sl-caption--date\" stroke=\"none\" x=\"3\" y=\"32\"></text>\r\n          </g>\r\n        </g>\r\n      </svg>`;\r\n\r\n    return html`\r\n      <div\r\n        style=\"width: ${rect.width}px; height: ${rect.height}px\"\r\n        tabindex=\"0\"\r\n        class=\"sl-outer\"\r\n        @blur=${this.onClearPoint}\r\n        @mouseout=${this.onClearPoint}\r\n        @mousemove=${this.onMouseMove}\r\n        @keydown=${this.onKeyDown}\r\n      >\r\n        ${innerSVG}\r\n        <div aria-live=\"assertive\" class=\"sr-announcer\"></div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  /**\r\n   * Determines Lighthouse pass/average/fail coloring based on value.\r\n   * @param {number} val\r\n   * @return {string}\r\n   * @private\r\n   */\r\n  computeColorClass_(val) {\r\n    // Match to Lighthouse rating. See https://goo.gl/Pz6xfR.\r\n    let result = \"fail\";\r\n    if (val >= 90) {\r\n      result = \"pass\";\r\n    } else if (val >= 50) {\r\n      result = \"average\";\r\n    }\r\n    return result;\r\n  }\r\n\r\n  onResize() {\r\n    // When the browser window resizes, force a render to redraw the SVG.\r\n    this.requestUpdate().then(() => {\r\n      this.redrawPoint();\r\n    });\r\n  }\r\n\r\n  firstUpdated() {\r\n    this.cursorElement_ = this.renderRoot.querySelector(\".sl-cursor\");\r\n    this.scoreElement_ = this.renderRoot.querySelector(\".sl-caption\");\r\n    this.announcerElement_ = this.querySelector(\".sr-announcer\");\r\n    this.scoreValueText_ = this.scoreElement_.querySelector(\r\n      \".sl-caption--value\"\r\n    );\r\n    this.scoreDateText_ = this.scoreElement_.querySelector(\".sl-caption--date\");\r\n  }\r\n}\r\n\r\ncustomElements.define(\"web-sparkline-chart\", SparklineChart);\r\n"]}