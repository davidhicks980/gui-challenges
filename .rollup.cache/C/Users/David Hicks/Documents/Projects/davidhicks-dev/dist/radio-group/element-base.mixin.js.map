{"version":3,"file":"element-base.mixin.js","sourceRoot":"","sources":["../../src/radio-group/element-base.mixin.ts"],"names":[],"mappings":"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","sourcesContent":["import \"element-internals-polyfill\";\r\nimport { IElementInternals } from \"element-internals-polyfill\";\r\nimport { LitElement } from \"lit\";\r\nimport { BehaviorSubject } from \"rxjs\";\r\nimport { property } from \"lit/decorators.js\";\r\nimport {\r\n  debounceTime,\r\n  filter,\r\n  map,\r\n  skipWhile,\r\n  take,\r\n  tap,\r\n} from \"rxjs/operators\";\r\n\r\nenum Constraint {\r\n  PATTERN = \"patternMismatch\",\r\n  LONG = \"tooLong\",\r\n  SHORT = \"tooShort\",\r\n  MAX = \"rangeOverflow\",\r\n  MIN = \"rangeUnderflow\",\r\n  TYPE = \"typeMismatch\",\r\n  VALID = \"valid\",\r\n  MISSING = \"valueMissing\",\r\n  BAD = \"badInput\",\r\n  STEP = \"stepMismatch\",\r\n}\r\nconst messages = {\r\n  typeMismatch: `Please enter a valid value.`,\r\n  badInput: {\r\n    string: `Please enter a valid value.`,\r\n    number: `Please enter a number.`,\r\n    range: `Invalid input.`,\r\n  },\r\n  rangeUnderflow: ({ min }) => `Value must be greater than or equal to ${min}.`,\r\n  rangeOverflow: ({ max }) => `Value must be less than or equal to ${max}.`,\r\n  stepMismatch: `Invalid input.`,\r\n  tooLong: (params: { maxLength: number; value: string }) =>\r\n    `Please enter at most ${params.maxLength} character(s).You entered ${params.value.length}.`,\r\n  tooShort: (params: { minLength: number; value: string }) =>\r\n    `Please enter at least ${params.minLength} character(s). You entered ${params.value.length}.`,\r\n  patternMismatch: ({ title }) => `Invalid input. ${title}`,\r\n  valueMissing: {\r\n    default: `Please enter an answer.`,\r\n    checkbox: `Please select at least one answer.`,\r\n    select: `Please select an option.`,\r\n    radio: `Please select an option.`,\r\n  },\r\n};\r\nexport class LitControl extends LitElement {\r\n  static formAssociated = true;\r\n\r\n  internals_: IElementInternals;\r\n  private _value: any;\r\n\r\n  formAttributes: string[];\r\n  model: BehaviorSubject<any> = new BehaviorSubject(\"\");\r\n  modelObserver = this.model.asObservable();\r\n  @property({ type: Boolean, reflect: true })\r\n  required: boolean = false;\r\n  @property({ type: String, reflect: true })\r\n  pattern: string;\r\n  @property({ type: Number, reflect: true })\r\n  max: number;\r\n  @property({ type: Number, reflect: true })\r\n  min: number;\r\n  @property({ type: Number, reflect: true })\r\n  maxLength: number;\r\n  @property({ type: Number, reflect: true })\r\n  minLength: number;\r\n  @property({ type: String, reflect: true })\r\n  field: string = \"default\";\r\n  @property({ type: Boolean, reflect: true })\r\n  checked: boolean = false;\r\n  loaded: boolean = false;\r\n  @property({ type: String, reflect: true })\r\n  type: string;\r\n\r\n  /**\r\n   * Tests the validity of the current entry.\r\n   * @returns {*}  {boolean}\r\n   * @memberof LitControl\r\n   */\r\n\r\n  constructor() {\r\n    super();\r\n    this.internals_ = this.attachInternals();\r\n    this.modelObserver\r\n      .pipe(\r\n        filter((val) => val.length > 0),\r\n        take(1)\r\n      )\r\n      .subscribe(() => {\r\n        this.classList.add(\"dirty\");\r\n      });\r\n  }\r\n\r\n  private getValidityFunctions(booleanField: boolean) {\r\n    const fieldIsEmpty = () =>\r\n      (booleanField && !this.checked) || (!booleanField && this._value == \"\");\r\n    const entryIsString = () => typeof this._value === \"string\";\r\n    const entryTooShort = () =>\r\n      this.minLength && this._value.length < this.minLength;\r\n    const entryTooLong = () =>\r\n      this.maxLength && this._value.length > this.minLength;\r\n    const entryIsNumber = () => typeof this._value === \"number\";\r\n    const entryTooSmall = () => this.min && this._value < this.min;\r\n\r\n    const entryTooLarge = () => this.max && this._value > this.max;\r\n    return {\r\n      fieldIsEmpty,\r\n      entryIsString,\r\n      entryTooShort,\r\n      entryTooLong,\r\n      entryIsNumber,\r\n      entryTooSmall,\r\n      entryTooLarge,\r\n    };\r\n  }\r\n\r\n  private patternNotMatched() {\r\n    let expression = new RegExp(this.pattern);\r\n    const patternNotMatched = !expression.test(this._value);\r\n    return patternNotMatched;\r\n  }\r\n\r\n  connectedCallback() {\r\n    super.connectedCallback();\r\n    this._listenToInput();\r\n    this.setAttribute(\"tabindex\", \"0\");\r\n    this.loaded = true;\r\n  }\r\n  private _listenToInput() {\r\n    this.modelObserver\r\n      .pipe(\r\n        skipWhile(() => this.loaded === false),\r\n        debounceTime(50),\r\n        map(this.handlers.model),\r\n        tap(this.handlers.validity)\r\n      )\r\n      .subscribe((val) => this._emitChangedModel(val));\r\n  }\r\n\r\n  disconnectedCallback() {\r\n    this.model.complete();\r\n    super.disconnectedCallback();\r\n  }\r\n  processFormValue(input: string): string | FormData {\r\n    return input;\r\n  }\r\n\r\n  _emitChangedModel(newValue: any) {\r\n    this.dispatchEvent(\r\n      new CustomEvent(\"ModelChanged\", {\r\n        detail: newValue,\r\n        bubbles: true,\r\n      })\r\n    );\r\n    this.dispatchEvent(\r\n      new CustomEvent(\"ValidityChanged\", {\r\n        detail: { valid: this.validity.valid, message: this.validationMessage },\r\n        bubbles: true,\r\n      })\r\n    );\r\n  }\r\n  // Mostly boilerplate--add common form control\r\n  // properties and methods. Many are simply wired\r\n  // through to the ElementInternals object.\r\n\r\n  get form() {\r\n    return this.internals_.form;\r\n  }\r\n\r\n  get name() {\r\n    return this.getAttribute(\"name\");\r\n  }\r\n\r\n  get validity() {\r\n    return this.internals_.validity;\r\n  }\r\n  get validationMessage() {\r\n    return this.internals_.validationMessage;\r\n  }\r\n  get willValidate() {\r\n    return this.internals_.willValidate;\r\n  }\r\n  /**Functions to handle value and validity changes*/\r\n  get handlers() {\r\n    const ui = this._uiHandler;\r\n    const value = this._valueHandler;\r\n    const event = this._eventHandler;\r\n    const validity = this._handleValidity;\r\n    const model = this._modelHandler;\r\n    return {\r\n      ui,\r\n      value,\r\n      event,\r\n      validity,\r\n      model,\r\n    };\r\n  }\r\n  private _uiHandler = (val: any): void => {\r\n    throw new Error(\r\n      \"Method not implemented. Define a function that updates the UI when a new modelValue is set \"\r\n    );\r\n  };\r\n  private _valueHandler = (value: string | number | boolean) => {\r\n    this.model.next(value);\r\n  };\r\n  private _eventHandler = (event: InputEvent) => {\r\n    this.model.next((event.target as HTMLInputElement).value);\r\n  };\r\n  private _handleValidity = () => {\r\n    let booleanField = false,\r\n      selectionType = \"default\";\r\n\r\n    if (this.field === \"checkbox\" || this.field === \"radio\") {\r\n      booleanField = true;\r\n      selectionType = this.field === \"radio\" ? \"radio\" : \"checkbox\";\r\n    } else if (this.field === \"select\") {\r\n      selectionType = \"select\";\r\n    }\r\n    const {\r\n      fieldIsEmpty,\r\n      entryIsString,\r\n      entryTooShort,\r\n      entryTooLong,\r\n      entryIsNumber,\r\n      entryTooSmall,\r\n      entryTooLarge,\r\n    } = this.getValidityFunctions(booleanField);\r\n\r\n    //If the field is labeled as required and does not have an entry, mark as invalid\r\n    if (this.required && fieldIsEmpty()) {\r\n      return this.setInternalValidity(Constraint.MISSING, false, selectionType);\r\n    } else if (booleanField) return true;\r\n    if (entryIsString()) {\r\n      if (entryTooShort())\r\n        return this.setInternalValidity(\r\n          Constraint.SHORT,\r\n          { minlength: this.minLength, val: this._value },\r\n          false\r\n        );\r\n      if (entryTooLong())\r\n        return this.setInternalValidity(\r\n          Constraint.LONG,\r\n          { maxlength: this.maxLength, val: this._value },\r\n          false\r\n        );\r\n    }\r\n    if (entryIsNumber()) {\r\n      if (entryTooSmall())\r\n        return this.setInternalValidity(\r\n          Constraint.MIN,\r\n          { min: this.min, val: this._value },\r\n          false\r\n        );\r\n      if (entryTooLarge())\r\n        return this.setInternalValidity(\r\n          Constraint.MAX,\r\n          { max: this.max, val: this._value },\r\n          false\r\n        );\r\n    }\r\n    if (this.patternNotMatched())\r\n      return this.setInternalValidity(\r\n        Constraint.PATTERN,\r\n        {\r\n          title: this.title\r\n            ? this.title\r\n            : \"Your answer does not match the desired format.\",\r\n        },\r\n        false\r\n      );\r\n\r\n    this.internals_.setValidity({ valid: true });\r\n\r\n    return true;\r\n  };\r\n  setInternalValidity = (\r\n    type: Constraint,\r\n    messageParameters: any | false,\r\n    messageProperty: string | false\r\n  ) => {\r\n    let validity: { [key in Constraint]: boolean } | {} = {};\r\n    validity[type] = true;\r\n    const message = messageParameters\r\n      ? messageProperty\r\n        ? messages[type][messageProperty](messageParameters)\r\n        : messages[type](messageParameters)\r\n      : messageProperty\r\n      ? messages[type][messageProperty]\r\n      : messages[type];\r\n    this.internals_.setValidity(validity, message);\r\n    return false;\r\n  };\r\n  private _modelHandler = (value) => {\r\n    if (typeof value === \"string\") {\r\n      this.internals_.setFormValue(value);\r\n      this._value = value;\r\n      return value;\r\n    }\r\n  };\r\n  setHandler(type: string, method: (...args) => void) {\r\n    this[\"_\" + type + \"Handler\"] = method;\r\n  }\r\n  @property({ type: String })\r\n  set value(value: string | string[]) {\r\n    if (this.loaded) {\r\n      if (Array.isArray(value)) value = value.join(\",\");\r\n      this.handlers.value(value);\r\n      this.handlers.ui(value);\r\n      this.requestUpdate(\"value\");\r\n    } else {\r\n      setTimeout(() => {\r\n        this.value = value;\r\n      }, 50);\r\n    }\r\n  }\r\n\r\n  get value(): string | string[] {\r\n    return this._value;\r\n  }\r\n\r\n  checkValidity() {\r\n    return this.internals_.checkValidity();\r\n  }\r\n}\r\n"]}