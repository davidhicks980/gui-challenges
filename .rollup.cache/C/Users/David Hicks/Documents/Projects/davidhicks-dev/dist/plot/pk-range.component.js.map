{"version":3,"file":"pk-range.component.js","sourceRoot":"","sources":["../../src/plot/pk-range.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { LitElement, css, html } from \"lit\";\r\nimport { customElement, property, state, query } from \"lit/decorators.js\";\r\nimport { Variable } from \"./Variable\";\r\n\r\n/**\r\n * @component  PlotSlider produces a range input that emits a\r\n * @fires PlotSlider#shift\r\n\r\n * @param {PlotParameters} params - this parametes generates the plot element including range inputs and toggles.\r\n *@param {string} element - the element to append the plot to. Will default to\r\n */\r\n@customElement(\"pk-range\")\r\nexport class PkRange extends LitElement {\r\n  /**Declarations */\r\n\r\n  @property({ type: Object })\r\n  variable: Variable = {\r\n    units: \"na\",\r\n    symbol: \"na\",\r\n    min: 1,\r\n    max: 5,\r\n    value: 1,\r\n    range: [1, 5],\r\n    name: \"\",\r\n  };\r\n\r\n  @query(\"#valueLabel\")\r\n  valueLabel!: HTMLDivElement;\r\n  private min: number = 1;\r\n  private max: number = 5;\r\n  @state()\r\n  private stepArray: number[] = [1];\r\n  private symbol: string = \"symbol\";\r\n  @state()\r\n  private value: number = 0;\r\n  private name: string = \"slider\";\r\n  @state()\r\n  private hasRange: boolean = false;\r\n  @state()\r\n  private step: number = 0;\r\n  constructor() {\r\n    super();\r\n  }\r\n\r\n  static get styles() {\r\n    return css`\r\n      input[type=\"range\"]::-moz-range-thumb {\r\n        border: none;\r\n        border-radius: 50%;\r\n        width: 20px;\r\n        height: 20px;\r\n        background-color: white;\r\n        border-radius: 50%;\r\n        box-shadow: 2px 0px 10px -3px rgba(63, 63, 63, 0.4);\r\n        border-style: solid;\r\n        border-width: 1px;\r\n        border-color: gray;\r\n      }\r\n\r\n      input[type=\"range\"]:-moz-focusring {\r\n        outline: 1px solid white;\r\n        outline-offset: -1px;\r\n      }\r\n\r\n      input[type=\"range\"] {\r\n        border-style: solid;\r\n        border-color: rgb(150, 150, 150);\r\n        border-width: 1px;\r\n        border-radius: 3px;\r\n        height: 7px;\r\n        -webkit-appearance: none;\r\n        box-shadow: 1px 1px 4px 1px inset rgba(63, 63, 63, 0.1);\r\n        width: 97%;\r\n        position: relative;\r\n        outline: none;\r\n      }\r\n\r\n      input[type=\"range\"]:hover {\r\n        border-style: solid;\r\n        border-bottom-width: 1px;\r\n      }\r\n\r\n      input[type=\"range\"]::-webkit-slider-thumb {\r\n        -webkit-appearance: none;\r\n        width: 20px;\r\n        height: 20px;\r\n        background-image: linear-gradient(#f6f6f6, #e9e9e9);\r\n        border-radius: 50%;\r\n        border: 1px solid gray;\r\n        box-shadow: 0 1px 1px 0 rgba(63, 63, 63, 0.5);\r\n      }\r\n      input[type=\"range\"]:active::-webkit-slider-thumb {\r\n        background-image: linear-gradient(#dfdfdf, #e9e9e9);\r\n      }\r\n\r\n      input[type=\"range\"]:hover::-webkit-slider-thumb {\r\n        box-shadow: 0 0 0 3px var(--pk-primary--lightest-transparent);\r\n        cursor: pointer;\r\n      }\r\n      input[type=\"range\"]:active::-webkit-slider-thumb {\r\n        box-shadow: 0 0 0 5px var(--pk-primary--lightest-transparent);\r\n        cursor: pointer;\r\n      }\r\n\r\n      input[type=\"range\"]::-ms-track {\r\n        height: 20px;\r\n      }\r\n\r\n      input[type=\"range\"]::-ms-thumb {\r\n        height: 20px;\r\n      }\r\n\r\n      /**Slider Containers*/\r\n      .range-container {\r\n        display: grid;\r\n        grid-template-columns: 80% 20%;\r\n        place-self: center;\r\n        width: 100%;\r\n        align-items: center;\r\n      }\r\n\r\n      .range-container:focus-within {\r\n        outline: 2px dashed rgba(0, 0, 0, 0.7);\r\n        cursor: pointer;\r\n      }\r\n      .range-container .value-label {\r\n        grid-column-start: 2;\r\n        grid-column-end: 3;\r\n        font-family: \"IBM Plex Sans\", \"Roboto\", Arial, Helvetica, sans-serif;\r\n      }\r\n\r\n      .range-container .name-label {\r\n        grid-column-start: 1;\r\n        grid-column-end: 2;\r\n        margin-left: 0.1em;\r\n        font: var(--pk-slider-name-font);\r\n        text-transform: capitalize;\r\n        color: rgb(50, 50, 80);\r\n        text-overflow: ellipsis;\r\n        overflow: hidden;\r\n        white-space: nowrap;\r\n      }\r\n      .range-container .slider-container {\r\n        grid-column-start: 1;\r\n        grid-column-end: 3;\r\n        margin-top: 0.1em;\r\n        padding-bottom: 0.5em;\r\n        margin-bottom: 0.25em;\r\n      }\r\n      .slider {\r\n        background-image: linear-gradient(\r\n          to right,\r\n          var(--pk-primary--light) 0,\r\n          var(--pk-primary) 100%,\r\n          white 100%\r\n        );\r\n        background-repeat: no-repeat;\r\n        /*CSS transitions*/\r\n        transition-property: none !important;\r\n        /*CSS transforms*/\r\n        transform: none !important;\r\n        /*CSS animations*/\r\n        animation: none !important;\r\n      }\r\n      /**Responsive*/\r\n    `;\r\n  }\r\n  connectedCallback() {\r\n    super.connectedCallback();\r\n    this.value = this.variable.value || 0;\r\n    this.min = this.variable.min || 0;\r\n    this.max = this.variable.max || 0;\r\n    this.symbol = this.variable.symbol || \"na\";\r\n    this.name = this.variable.name || \"na\";\r\n    this.step = typeof this.variable.step === \"number\" ? this.variable.step : 0;\r\n    if (this.variable.range) {\r\n      this.hasRange = true;\r\n      this.stepArray = this.variable.range;\r\n    }\r\n\r\n    this.requestUpdate();\r\n  }\r\n\r\n  private sliderStep(step: number, max: number): number {\r\n    if (step > 0) {\r\n      return step;\r\n    } else {\r\n      if (max > 10) {\r\n        step = 1;\r\n        return 1;\r\n      } else {\r\n        step = max / 20;\r\n        return step;\r\n      }\r\n    }\r\n  }\r\n  handleEvent(e: Event) {\r\n    const target = e.target as HTMLInputElement;\r\n    const output = this.hasRange\r\n      ? this.stepArray[parseFloat(target.value) - 1]\r\n      : target.value;\r\n    target.style.backgroundSize = `${\r\n      ((parseFloat(target.value) - this.min) / (this.max - this.min)) * 100\r\n    }%, 10%`;\r\n    this.valueLabel.innerText = output.toString();\r\n    this.dispatchEvent(\r\n      new CustomEvent(\"shift\", {\r\n        detail: {\r\n          symbol: this.symbol,\r\n          value: output,\r\n        },\r\n      })\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return html`\r\n      <div class=\"range-container\">\r\n        <div class=\"name-label\" id=\"nameLabel\">\r\n          ${this.name} <span>(${this.symbol.replace(\"_\", \"\")})</span>\r\n        </div>\r\n        <label for=\"${this.name}RangeInput\" class=\"value-label\" id=\"valueLabel\">\r\n          ${this.hasRange ? this.stepArray[this.value - 1] : this.value}\r\n        </label>\r\n        <div class=\"slider-container\">\r\n          <input\r\n            @input=\"${this.handleEvent}\"\r\n            type=\"range\"\r\n            min=\"${this.min}\"\r\n            max=\"${this.max}\"\r\n            step=\"${this.sliderStep(this.step, this.max)}\"\r\n            value=\"${this.value}\"\r\n            class=\"slider\"\r\n            style=\"background-size:${`${\r\n              ((this.value - this.min) / (this.max - this.min)) * 100\r\n            }%, 10%`}\"\r\n            id=\"${this.name}RangeInput\"\r\n          />\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n}\r\n"]}