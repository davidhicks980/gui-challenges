{"version":3,"file":"plot.component.js","sourceRoot":"","sources":["../../src/plot/plot.component.ts"],"names":[],"mappings":"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","sourcesContent":["import \"./pk-range.component\";\r\nimport \"./pk-latex.component\";\r\n\r\nimport {\r\n  Chart,\r\n  ScatterDataPoint,\r\n  registerables,\r\n} from \"chart.js/dist/chart.esm\";\r\nimport { css, html, LitElement } from \"lit\";\r\n\r\nimport { plotOptions } from \"./plot-options.config\";\r\nimport { VariableSet } from \"./VariableSet.type\";\r\nimport { PlotParameters } from \"./PlotPage\";\r\nimport { Variable } from \"./Variable\";\r\nimport { customElement, property, query, state } from \"lit/decorators.js\";\r\nimport { query as safeQuery } from \"@github/query-selector\";\r\n/**\r\n * Component that renders a plot to the DOM given a list of parameters (see PlotParameters interface)\r\n * @param {PlotParameters} params - this function generates the plot element including range inputs and toggles.\r\n *@param {string} element - the element to append the plot to. Will default to\r\n */\r\n\r\nconst plots = {\r\n  multipledose: {\r\n    id: \"pk_mdmp_q2_mdplot\",\r\n    index: 2,\r\n    title: \"Multiple Dosing Regimen Plot\",\r\n    header:\r\n      \"Drug X is an antibiotic with a therapeutic range between 20 and 40 mg/L. It is administered as an IV bolus. The population average for clearance and volume are 6 L/h and 85 L, respectively. Using the slider bars, explore how changes in dose and dosing interval impact achieving concentrations within the therapeutic window while maintaining an average steady-state concentration of 30 mg/L.\",\r\n    variables: [\r\n      {\r\n        name: \"Dose\",\r\n        units: \"mg\",\r\n        symbol: \"X_0\",\r\n        min: 500,\r\n        max: 4500,\r\n        value: 1000,\r\n        step: 50,\r\n      },\r\n      {\r\n        name: \"Number of Doses\",\r\n        units: \"#\",\r\n        symbol: \"n\",\r\n        min: 4,\r\n        max: 24,\r\n        value: 4,\r\n        step: 2,\r\n      },\r\n      {\r\n        name: \"Volume of Distribution\",\r\n        units: \"L\",\r\n        symbol: \"V_D\",\r\n        min: 50,\r\n        max: 500,\r\n        value: 250,\r\n        step: 5,\r\n      },\r\n      {\r\n        name: \"Clearance\",\r\n        units: \"mL/min\",\r\n        symbol: \"Cl\",\r\n        min: 5,\r\n        max: 50,\r\n        value: 100,\r\n        step: 5,\r\n      },\r\n      {\r\n        name: \"Dosing Interval\",\r\n        units: \"hr\",\r\n        symbol: \"tau\",\r\n        min: 1,\r\n        max: 7,\r\n        value: 4,\r\n        step: 1,\r\n        range: [null, 4, 8, 12, 18, 24, 36, 48],\r\n      },\r\n    ],\r\n    equation:\r\n      '`(v[\"X_0\"]/v[\"V_D\"])*(1-2.71^(-n*0.06*(v[\"Cl\"]/v[\"V_D\"])*v[\"tau\"]))/(1-2.71^(-0.06*(v[\"Cl\"]/v[\"V_D\"])*v[\"tau\"]))*(2.71^(-0.06*(v[\"Cl\"]/v[\"V_D\"])*x))`',\r\n    equationTemplate: \"\",\r\n    multipleDose: true,\r\n    bottomBound: 20,\r\n    topBound: 40,\r\n    axis: [\"time (hr)\", \"concentration (ug/L)\"],\r\n  },\r\n  extravasation: {\r\n    id: \"pk_akct_q1_scplot\",\r\n    title: \"Extravascular Administration\",\r\n    index: 1,\r\n    header:\r\n      \"Move the slider bar to see the effects of clearance on the concentration-time profile. Concentration is related to time using the equation.\",\r\n    variables: [\r\n      {\r\n        name: \"Dose\",\r\n        units: \"mg\",\r\n        symbol: \"X_0\",\r\n        min: 250,\r\n        max: 1000,\r\n        value: 500,\r\n        step: 50,\r\n      },\r\n      {\r\n        name: \"Clearance\",\r\n        units: \"mL/min\",\r\n        symbol: \"Cl\",\r\n        min: 5,\r\n        max: 50,\r\n        value: 25,\r\n        step: 5,\r\n      },\r\n      {\r\n        name: \"Volume of Distribution\",\r\n        units: \"L\",\r\n        symbol: \"V_D\",\r\n        min: 50,\r\n        max: 500,\r\n        value: 250,\r\n        step: 10,\r\n      },\r\n      {\r\n        name: \"k<sub>a</sub>\",\r\n        units: \"1/h\",\r\n        symbol: \"k_a\",\r\n        min: 0.1,\r\n        max: 1,\r\n        value: 0.5,\r\n        step: 0.05,\r\n      },\r\n    ],\r\n    equation:\r\n      '`(v[\"k_a\"]*v[\"X_0\"])/(v[\"V_D\"]*v[\"k_a\"]-(0.06*v[\"Cl\"]/v[\"V_D\"]))*(2.71^(-(0.06*v[\"Cl\"]/v[\"V_D\"])*x)-2.71^(-v[\"k_a\"]*x))`',\r\n    equationTemplate: \"`C = `\",\r\n    axis: [\"time (min)\", \"drug X(mg/L)\"],\r\n    multipleDose: false,\r\n  },\r\n};\r\n\r\n@customElement(\"plot-engine\")\r\nexport class PlotEngine extends LitElement {\r\n  /**Declarations */\r\n\r\n  @state()\r\n  params: Partial<PlotParameters> = plots.multipledose;\r\n  private _plotType = \"multipledose\";\r\n\r\n  @property({ type: String, reflect: true })\r\n  public get plotType() {\r\n    return this._plotType;\r\n  }\r\n  public set plotType(value: string) {\r\n    this._plotType = value;\r\n    this.params = plots[value];\r\n    this._reset();\r\n  }\r\n  @property({ type: Object, reflect: false })\r\n  loaded = {};\r\n  @query(\"#chart\")\r\n  canvas!: HTMLCanvasElement;\r\n\r\n  /**Sets the highlight color of the plot */\r\n  @property({ type: String })\r\n  mainColor: string = getComputedStyle(\r\n    document.documentElement\r\n  ).getPropertyValue(\"--indigo-7\");\r\n  @property({ type: String })\r\n  highlightColor: string = getComputedStyle(\r\n    document.documentElement\r\n  ).getPropertyValue(\"--indigo-9\");\r\n  @property({ type: String })\r\n  displayedEquation!: string;\r\n  isMultipleDose!: boolean;\r\n  tauValueArray = [null, 4, 8, 12, 18, 24, 36, 48];\r\n  go = true;\r\n  plottedEquation: string = \"\";\r\n  latexEquation: string = \"\";\r\n  range: number = 10;\r\n  labels!: string[];\r\n  independentVariable!: string;\r\n  private variableValues: VariableSet = {};\r\n\r\n  chart: Chart;\r\n  scale: number = 40;\r\n  worker!: Worker;\r\n  lockSVG: any;\r\n  plotFunction!: (values: {}, equation: string, scale?: number) => void;\r\n\r\n  createWorker(fn) {\r\n    const blob = new Blob([\"self.onmessage = \", fn.toString()], {\r\n      type: \"text/javascript\",\r\n    });\r\n    const url = URL.createObjectURL(blob);\r\n\r\n    return new Worker(url);\r\n  }\r\n\r\n  private logToggle(e: Event): void {\r\n    this.chart.options.scales.y.type = (e.target as HTMLInputElement).checked\r\n      ? \"logarithmic\"\r\n      : \"linear\";\r\n    this.chart.update();\r\n  }\r\n  private fixToggle(e: Event): void {\r\n    this.chart.options.scales.y.max = (e.target as HTMLInputElement).checked\r\n      ? this.max()\r\n      : null;\r\n    this.chart.update();\r\n  }\r\n\r\n  private max(): number {\r\n    const data = this.chart.data.datasets[0].data as ScatterDataPoint[];\r\n    return data.reduce((max, p) => (p.y > max ? p.y : max), data[0].y);\r\n  }\r\n  _initPlotting(chart) {\r\n    this._initVariables();\r\n    this._initPlotUpdate(chart);\r\n  }\r\n  firstUpdated() {\r\n    this.chart = this._initPlotCanvas(\r\n      this.canvas,\r\n      this.mainColor,\r\n      this.highlightColor\r\n    );\r\n    this._initPlotting(this.chart);\r\n  }\r\n  constructor() {\r\n    super();\r\n    this.eventDebouncer = this.createDebouncer(this.updatePlot, 30);\r\n    Chart.register(...registerables);\r\n  }\r\n  /**\r\n   * @description Sets variables using user-supplied or default values. This must be called prior to plotting any equations\r\n   * @private\r\n   * @memberof PlotEngine\r\n   */\r\n  private _initVariables() {\r\n    if (this.params?.equation && Array.isArray(this.params?.variables)) {\r\n      //Replaces user-interpolated variables and ASCII syntax with property accessor that utilize dot notations. Honestly, probably didn't need to replace anything here, but it works fine and may have a small performance benefit.\r\n      this.plottedEquation = this.params.equation\r\n        .replace(/v\\[\\\"/g, \"variables.\")\r\n        .replace(/\\\"]/g, \"\")\r\n        .replace(/\\^/g, \"**\")\r\n        .replace(/\\`/g, \"\");\r\n      //The side of the X axis. Defaults to 100\r\n      this.range = this.params.range ? this.params.range : 100;\r\n      //Axis labels. Should be provided as ['x', 'y']\r\n      this.labels = this.params.axis;\r\n      //The independent variable. Defaults to x. This is only used in the interpolated equation, so it does not affect the graph itself\r\n      this.independentVariable = this.params.independentVariable\r\n        ? this.params.independentVariable\r\n        : \"x\";\r\n      //Initiate the variable values\r\n      this.params.variables.forEach((v) => {\r\n        this.variableValues[v.symbol] = v.value;\r\n      });\r\n      //Can now initiate graphing\r\n      this.loaded = true;\r\n    }\r\n  }\r\n  private _initPlotCanvas(\r\n    canvasElement: HTMLCanvasElement,\r\n    color: string,\r\n    highlight: string\r\n  ) {\r\n    return new Chart(\r\n      canvasElement,\r\n      plotOptions([{ x: 0, y: 0 }], canvasElement, color, highlight)\r\n    );\r\n  }\r\n  private _initPlotUpdate(chart: Chart) {\r\n    const updateChart = this.updateChart;\r\n    this._initCoordinateFunction(updateChart, chart);\r\n    this.latex.update();\r\n    this.plotFunction(this.variableValues, this.plottedEquation, this.range);\r\n  }\r\n  private _reset() {\r\n    this.worker.terminate();\r\n    this._initPlotting(this.chart);\r\n  }\r\n  private _initCoordinateFunction(\r\n    updateChart: (points: ScatterDataPoint[], chart: Chart) => void,\r\n    chart: Chart\r\n  ) {\r\n    if (window.Worker) {\r\n      this.worker = this.params.multipleDose\r\n        ? this.createWorker(this.multipleDosingWorker)\r\n        : this.createWorker(this.bolusDosingWorker);\r\n      this.worker.onmessage = function (ev) {\r\n        updateChart(ev.data, chart);\r\n      };\r\n      this.plotFunction = (values: {}, equation: string, range: number) => {\r\n        if (this.go) {\r\n          this.worker.postMessage([values, equation, range]);\r\n        }\r\n      };\r\n    } else {\r\n      this.plotFunction = this.params.multipleDose\r\n        ? this.nativeFunctions.multipleDose\r\n        : this.nativeFunctions.bolus;\r\n    }\r\n  }\r\n\r\n  updateChart(points: ScatterDataPoint[], chart: Chart) {\r\n    chart.data.datasets[0].data = points;\r\n    chart.update();\r\n  }\r\n  get nativeFunctions() {\r\n    return {\r\n      /**Updates the bolus coordinates*/\r\n      bolus: (values: VariableSet, equation: string, scale: number) => {\r\n        return this.calculations.bolus(values, equation, scale);\r\n      },\r\n      multipleDose: (values: VariableSet, equation: string) => {\r\n        return this.calculations.multipleDose(values, equation);\r\n      },\r\n    };\r\n  }\r\n\r\n  get calculations() {\r\n    return {\r\n      /**\r\n       * Multiple dose coordinate calculation\r\n       * @param {VariableSet} values - key value pairs representing variable values\r\n       * @param {string} equation - a string representing an equation with interpolated variables\r\n       * @returns {ScatterDataPoint[]} an array of coordinates\r\n       */\r\n      multipleDose: (\r\n        values: VariableSet,\r\n        equation: string\r\n      ): ScatterDataPoint[] => {\r\n        const tau = values[\"tau\"],\r\n          doses = values[\"n\"],\r\n          calculate = new Function(\r\n            \"variables\",\r\n            \"x\",\r\n            \"n\",\r\n            '\"use strict\";return (' + equation + \")\"\r\n          ),\r\n          data = [];\r\n        let i,\r\n          stepCount,\r\n          hour = 0;\r\n        for (i = 0; i < doses; i++) {\r\n          for (stepCount = 0; stepCount < tau; stepCount++) {\r\n            data.push({\r\n              x: hour++,\r\n              y: calculate(values, stepCount, i + 1),\r\n            });\r\n            if (hour === doses * tau) {\r\n              stepCount++;\r\n              for (stepCount; stepCount < doses * tau * 0.5; stepCount++) {\r\n                data.push({\r\n                  x: hour++,\r\n                  y: calculate(values, stepCount, i + 1),\r\n                });\r\n              }\r\n            }\r\n          }\r\n        }\r\n        return data;\r\n      },\r\n      /**\r\n       * Bolus dose coordinate calculation\r\n       * @param {VariableSet} values - key value pairs representing variable values\r\n       * @param {string} equation - a string representing an equation with interpolated variables\r\n       * @param {number} scale - A number representing the size of the x-axis. Defaults to 40.\r\n       * @returns {ScatterDataPoint[]} an array of coordinates\r\n       */\r\n      bolus: (\r\n        values: VariableSet,\r\n        equation: string,\r\n        scale: number\r\n      ): ScatterDataPoint[] => {\r\n        let i = 0;\r\n        const data = [];\r\n        const calculate = new Function(\r\n          \"variables\",\r\n          \"x\",\r\n          '\"use strict\"; return (' + equation + \")\"\r\n        );\r\n        for (i; i < scale; i += 0.5) {\r\n          data.push({\r\n            x: i++,\r\n            y: calculate(values, i),\r\n          });\r\n        }\r\n        return data;\r\n      },\r\n    };\r\n  }\r\n\r\n  latex = {\r\n    interpolateVariables: (equation: string, variables: object): string => {\r\n      const calculate = new Function(\r\n        \"variables\",\r\n        '\"use strict\";return (' + equation + \")\"\r\n      );\r\n      return calculate(variables);\r\n    },\r\n    update: () => {\r\n      this.displayedEquation = this.latex\r\n        .interpolateVariables(\r\n          this.params.equation\r\n            .replace(/v\\[\"/g, \"${variables.\")\r\n            .replace(/\"\\]/g, \".toFixed(1)}\"),\r\n          this.variableValues\r\n        )\r\n        .replace(/x/g, \"time\")\r\n        .replace(/2.71/g, \"e\")\r\n        .replace(/\\*?-?\\*?0.06\\*?/g, \"\");\r\n    },\r\n  };\r\n\r\n  minMaxCalc(name: string, value: number, type: string) {\r\n    if (name === \"tau\") {\r\n      const comparator = type !== \"none\" ? Math[type] : 1;\r\n      comparator !== 1\r\n        ? this.tauValueArray[value]\r\n        : comparator(this.tauValueArray);\r\n    } else {\r\n      return value;\r\n    }\r\n  }\r\n  disconnectedCallback() {\r\n    this.worker.terminate();\r\n  }\r\n\r\n  multipleDosingWorker = (ev: MessageEvent<any[]>): void => {\r\n    const values = ev.data[0];\r\n    const equation = ev.data[1];\r\n\r\n    const tau = values[\"tau\"],\r\n      doses = values[\"n\"],\r\n      calculate = new Function(\r\n        \"variables\",\r\n        \"x\",\r\n        \"n\",\r\n        '\"use strict\";return (' + equation + \")\"\r\n      ),\r\n      data = [];\r\n    let i,\r\n      stepCount,\r\n      hour = 0;\r\n    for (i = 0; i < doses; i++) {\r\n      for (stepCount = 0; stepCount < tau; stepCount++) {\r\n        data.push({\r\n          x: hour++,\r\n          y: calculate(values, stepCount, i + 1),\r\n        });\r\n        if (hour === doses * tau) {\r\n          stepCount++;\r\n          for (stepCount; stepCount < doses * tau * 0.5; stepCount++) {\r\n            data.push({\r\n              x: hour++,\r\n              y: calculate(values, stepCount, i + 1),\r\n            });\r\n          }\r\n        }\r\n      }\r\n    }\r\n    postMessage(data, null);\r\n  };\r\n  bolusDosingWorker = (ev: MessageEvent<any[]>): void => {\r\n    let i = 0;\r\n    const data = [];\r\n    const calculate = new Function(\r\n      \"variables\",\r\n      \"x\",\r\n      '\"use strict\"; return (' + ev.data[1] + \")\"\r\n    );\r\n    for (i; i < 40; i += 0.5) {\r\n      data.push({\r\n        x: i++,\r\n        y: calculate(ev.data[0], i),\r\n      });\r\n    }\r\n\r\n    postMessage(data, null);\r\n  };\r\n\r\n  get parameters() {\r\n    if (this.params.variables) return this.params.variables;\r\n    else return [];\r\n  }\r\n\r\n  createDebouncer = (method: (...args: any) => any, delay: number) => {\r\n    let timeout = false;\r\n    return (params: {}) => (e) => {\r\n      if (!timeout) {\r\n        // Executes the func after delay time.\r\n        timeout = true;\r\n        setTimeout(() => {\r\n          method(params, e);\r\n          timeout = false;\r\n        }, delay);\r\n      }\r\n    };\r\n  };\r\n\r\n  eventDebouncer: (params: {}) => any;\r\n  updatePlot = (slider, e) => {\r\n    this.variableValues[slider.symbol] = parseFloat(e.detail.value);\r\n    this.latex.update();\r\n\r\n    this.plotFunction(this.variableValues, this.plottedEquation, this.range);\r\n  };\r\n  render() {\r\n    return html`\r\n      <div class=\"plot-container\">\r\n        <div class=\"chart-container\">\r\n          <canvas id=\"chart\"></canvas>\r\n        </div>\r\n\r\n        <div class=\"slider-container\">\r\n          <div class=\"sliders\">\r\n            ${this.params.variables.map((v: Variable) => {\r\n              return html`<pk-range\r\n                .variable=\"${v}\"\r\n                @shift=\"${this.eventDebouncer(v)}\"\r\n              ></pk-range>`;\r\n            })}\r\n            <div class=\"toggle-container\">\r\n              <div id=\"toggle-log-div\" class=\"toggle-div\">\r\n                log axis\r\n                <label class=\"toggle-check\">\r\n                  <input\r\n                    @click=\"${this.logToggle}\"\r\n                    id=\"log\"\r\n                    type=\"checkbox\"\r\n                    class=\"toggleInput\"\r\n                    data-unchecked\r\n                  />\r\n                  <span class=\"toggle-touch round\"></span>\r\n                </label>\r\n              </div>\r\n              <div id=\"toggle-axis-div\" class=\"toggle-div\">\r\n                fix axis\r\n                <label class=\"toggle-check\">\r\n                  <input\r\n                    @click=\"${this.fixToggle}\"\r\n                    id=\"fix\"\r\n                    type=\"checkbox\"\r\n                    class=\"toggleInput\"\r\n                    data-unchecked\r\n                  />\r\n                  <span class=\"toggle-touch round\"></span>\r\n                </label>\r\n\r\n                <!--End of wrapper div-->\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div class=\"${this.lockSVG ? \"equation-area lock\" : \"equation-area\"}\">\r\n          <button\r\n            @click=\"${() => {\r\n              this.lockSVG = !this.lockSVG;\r\n              this.requestUpdate();\r\n            }}\"\r\n            class=\"lock-button\"\r\n            aria-details=\"locks an expanded equation in place\"\r\n            tabindex=\"0\"\r\n          >\r\n            <svg\r\n              xmlns=\"http://www.w3.org/2000/svg\"\r\n              height=\"18\"\r\n              viewBox=\"0 0 24 24\"\r\n              width=\"18\"\r\n            >\r\n              <path\r\n                d=${this.lockSVG\r\n                  ? \"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zM9 8V6c0-1.66 1.34-3 3-3s3 1.34 3 3v2H9z\"\r\n                  : \"M12 13c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm6-5h-1V6c0-2.76-2.24-5-5-5-2.28 0-4.27 1.54-4.84 3.75-.14.54.18 1.08.72 1.22.53.14 1.08-.18 1.22-.72C9.44 3.93 10.63 3 12 3c1.65 0 3 1.35 3 3v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 11c0 .55-.45 1-1 1H7c-.55 0-1-.45-1-1v-8c0-.55.45-1 1-1h10c.55 0 1 .45 1 1v8z\"}\r\n              />\r\n            </svg>\r\n          </button>\r\n\r\n          <pk-latex\r\n            class=\"scale-equation\"\r\n            .equation=\"${this.displayedEquation}\"\r\n          ></pk-latex>\r\n        </div>\r\n      </div>\r\n    `;\r\n  }\r\n\r\n  static get styles() {\r\n    return css`\r\n      /**Css for Toggles*/\r\n      div.toggle-div {\r\n        font-family: var(--title-font), Helvetica, sans-serif;\r\n        color: rgb(133, 133, 133);\r\n        text-align: left;\r\n        font-size: 9pt;\r\n        -webkit-text-stroke: #868686;\r\n        line-height: 2.5em;\r\n        width: fit-content;\r\n        text-transform: capitalize;\r\n      }\r\n      div.toggle-div:hover {\r\n        transition: 0.2s;\r\n        color: black;\r\n      }\r\n      .toggle-div:focus-within {\r\n        outline: 2px dashed black;\r\n        outline-offset: 3px;\r\n      }\r\n      .toggle-check {\r\n        position: relative;\r\n        display: block;\r\n        width: 2.8em;\r\n        height: 1.4em;\r\n        margin-left: 0.2em;\r\n      }\r\n\r\n      .toggle-check input {\r\n        opacity: 0;\r\n        width: 0;\r\n        height: 0;\r\n      }\r\n\r\n      .toggle-touch {\r\n        position: absolute;\r\n        cursor: pointer;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        bottom: 0;\r\n        background-color: #ccc;\r\n        box-shadow: 1px 2px 4px inset rgba(63, 63, 63, 0.2);\r\n        transition: all 0.4s;\r\n      }\r\n\r\n      .toggle-touch:before {\r\n        position: absolute;\r\n        content: \"\";\r\n        transform: translateY(-0.1em);\r\n        height: 1.4em;\r\n        width: 1.4em;\r\n        background-image: linear-gradient(#f6f6f6, #e9e9e9);\r\n        -webkit-transition: 0.2s;\r\n        transition: 0.2s;\r\n        box-shadow: 0 1px 1px 0 rgba(63, 63, 63, 0.514);\r\n        border: 1px solid gray;\r\n        border-radius: 50%;\r\n      }\r\n\r\n      input[type=\"checkbox\"]:checked + .toggle-touch {\r\n        background-color: var(--body-font);\r\n      }\r\n\r\n      input[type=\"checkbox\"]:checked + .toggle-touch:before {\r\n        -webkit-transform: translateX(18px);\r\n        -ms-transform: translateX(18px);\r\n        transform: translateX(15px) translateY(-0.15em);\r\n      }\r\n\r\n      /* Rounded sliders */\r\n      .toggle-touch.round {\r\n        box-shadow: inset 0 0 0 1px gray,\r\n          1px 2px 4px inset rgba(63, 63, 63, 0.2);\r\n\r\n        border-radius: 10px;\r\n      }\r\n\r\n      .toggle-container {\r\n        display: flex;\r\n        border: 1px dotted #bbbbbb;\r\n        border-radius: 5px;\r\n        height: 3.5em;\r\n        place-content: space-evenly;\r\n        box-shadow: var(--pk-shadow--step-0);\r\n      }\r\n      /**\r\n      Layout \r\n      */\r\n      .plot-container {\r\n        display: grid;\r\n        grid-template-columns: minmax(5px, 100%) 250px;\r\n        box-sizing: border-box;\r\n        gap: 10px;\r\n        margin: 10px;\r\n      }\r\n      .chart-container {\r\n        font-family: Arial, Helvetica, sans-serif;\r\n        grid-area: 1 / 1 / span 2 / 1;\r\n        max-height: 100%;\r\n        background: white;\r\n        border-radius: 5px;\r\n        padding: 30px 30px 10px 10px;\r\n        position: relative;\r\n        border: 1px solid #bbbbbb;\r\n        box-shadow: var(--pk-shadow--step-1);\r\n      }\r\n      /**Slider Containers*/\r\n      .slider-container {\r\n        grid-area: 2 / 2 / 2 / 2;\r\n        background: white;\r\n        border: 1px solid #bbbbbb;\r\n        border-radius: 5px;\r\n        padding: 10px;\r\n        display: flex;\r\n        flex-direction: column;\r\n        box-shadow: var(--pk-shadow--step-1);\r\n      }\r\n\r\n      .equation-area {\r\n        grid-area: 1 / 2 / 2 / 2;\r\n        background: white;\r\n        padding: 0px;\r\n\r\n        overflow: auto;\r\n        transform: scale(1) translateX(0px) translateY(0px);\r\n        border: 1px solid #bbbbbb;\r\n        border-radius: 5px;\r\n        display: block;\r\n        box-shadow: var(--pk-shadow--step-1);\r\n      }\r\n\r\n      pk-latex {\r\n        --input: normal 0.7em var(--body-font), serif;\r\n      }\r\n      .equation-area:hover {\r\n        transform-origin: 100% 100%;\r\n        transform: scale(1.8) translateX(-50px) translateY(20px);\r\n        transition-delay: 1s;\r\n        transition-duration: 0.3s;\r\n        transition-timing-function: ease;\r\n        transition-property: transform;\r\n        border: 1px solid black;\r\n        box-shadow: var(--pk-small-shadow);\r\n      }\r\n\r\n      .equation-area.lock {\r\n        transform-origin: 100% 100%;\r\n        transform: scale(1.8) translateX(-20px) translateY(20px);\r\n        transition-delay: 1s;\r\n        transition-duration: 0.3s;\r\n        transition-timing-function: ease;\r\n        transition-property: transform;\r\n        box-shadow: var(--pk-small-shadow);\r\n      }\r\n      .lock-button {\r\n        position: absolute;\r\n        right: 0px;\r\n        top: 5px;\r\n        background: none;\r\n        border: none;\r\n        z-index: 1;\r\n        outline: none;\r\n      }\r\n      .lock-button:hover {\r\n        fill: var(--pk-primary);\r\n      }\r\n      @media all and (max-width: 600px) and (min-width: 0px) {\r\n        pk-latex {\r\n          --input: normal 0.9em \"Space Mono\", serif;\r\n        }\r\n        .equation-area:hover {\r\n          transform-origin: none;\r\n          transform: none;\r\n        }\r\n        .equation-area.lock {\r\n          transform-origin: none;\r\n          transform: none;\r\n        }\r\n        .lock-button {\r\n          display: none;\r\n        }\r\n        .equation-area {\r\n          grid-area: 1 / 1 / 1 / 1;\r\n          transform: scale(1) translateX(0px) translateY(0px);\r\n          border: 0px;\r\n          border-radius: 5px;\r\n          background: rgba(0, 0, 0, 0);\r\n          outline: 0px;\r\n        }\r\n        .equation-area:hover {\r\n          border: none;\r\n        }\r\n        .plot-container {\r\n          display: grid;\r\n          grid-template-rows: auto auto;\r\n          grid-template-columns: 100%;\r\n          gap: 10px;\r\n          padding: 0;\r\n          margin: 10px;\r\n          min-width: 0px;\r\n        }\r\n        .slider-container {\r\n          grid-area: 2 / 1 / 2 / 1;\r\n\r\n          display: flex;\r\n          flex-direction: column;\r\n        }\r\n        .slider-container .toggle-container {\r\n          width: 100%;\r\n          border: 1px dotted lightgray;\r\n        }\r\n        .toggle-container .toggle-div {\r\n          line-height: 2em;\r\n        }\r\n        .slider-container .sliders {\r\n          display: grid;\r\n          grid-template-columns: 45% 45%;\r\n          column-gap: 20px;\r\n          row-gap: 0px;\r\n        }\r\n\r\n        .chart-container {\r\n          grid-area: 1 / 1 / 1 / 1;\r\n          width: 1fr;\r\n          padding-top: 85px;\r\n          margin: 0px;\r\n          padding-bottom: 0px;\r\n        }\r\n      }\r\n    `;\r\n  }\r\n}\r\n"]}